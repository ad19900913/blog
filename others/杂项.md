# 知识学杂了

## win10使用双网卡同时访问内外网

1. 执行`ipconfig`查看网卡配置，本例中，无线网卡用来访问外网、有线网卡用来访问内网

    ```
    以太网适配器 有线:
    
       连接特定的 DNS 后缀 . . . . . . . :
       本地链接 IPv6 地址. . . . . . . . : fe80::38f1:f9c2:eb9c:214c%8
       IPv4 地址 . . . . . . . . . . . . : 10.181.143.22
       子网掩码  . . . . . . . . . . . . : 255.255.255.0
       默认网关. . . . . . . . . . . . . :
    
    无线局域网适配器 无线:
    
       连接特定的 DNS 后缀 . . . . . . . :
       IPv6 地址 . . . . . . . . . . . . : 2409:8960:2ad0:5a1d:b06d:5f2b:b1ca:6bb0
       临时 IPv6 地址. . . . . . . . . . : 2409:8960:2ad0:5a1d:a987:4268:f255:a8e2
       本地链接 IPv6 地址. . . . . . . . : fe80::b06d:5f2b:b1ca:6bb0%19
       IPv4 地址 . . . . . . . . . . . . : 172.20.10.2
       子网掩码  . . . . . . . . . . . . : 255.255.255.240
       默认网关. . . . . . . . . . . . . : fe80::106f:fdfd:4a9e:d6e8%19
                                           172.20.10.1
    ```

2. 执行```route print -4```查看IPV4的路由信息

3. 删除所有访问0.0.0.0的路由配置：```route delete 0.0.0.0```

4. 添加无线路由访问外网```route add 0.0.0.0 mask 0.0.0.0 172.20.10.1 -p```，其中```172.20.10.1```是无线网关地址

5. 添加有线路由访问内网,可以添加多条记录,以实现访问不同的内网网段

    - ```route add 10.181.143.0 mask 255.255.255.0 10.181.143.254 -p```
    
    - ```route add 10.187.2.0 mask 255.255.255.0 10.181.143.254 -p```
    
    其中```10.181.143.254```是有线网关地址
    
6. 配置完成后，再次执行```route print -4```查看IPV4的路由信息

    ```shell script
    IPv4 路由表
    ===========================================================================
    活动路由:
    网络目标        网络掩码          网关       接口   跃点数
              0.0.0.0          0.0.0.0      172.20.10.1      172.20.10.2     56
         10.181.143.0    255.255.255.0   10.181.143.254    10.181.143.22     36
        10.181.143.22  255.255.255.255            在链路上     10.181.143.22    291
           10.187.2.0    255.255.255.0   10.181.143.254    10.181.143.22     36
            127.0.0.0        255.0.0.0            在链路上         127.0.0.1    331
            127.0.0.1  255.255.255.255            在链路上         127.0.0.1    331
      127.255.255.255  255.255.255.255            在链路上         127.0.0.1    331
          169.254.0.0      255.255.0.0            在链路上   169.254.142.167    281
      169.254.142.167  255.255.255.255            在链路上   169.254.142.167    281
      169.254.255.255  255.255.255.255            在链路上   169.254.142.167    281
          172.20.10.0  255.255.255.240            在链路上       172.20.10.2    311
          172.20.10.2  255.255.255.255            在链路上       172.20.10.2    311
         172.20.10.15  255.255.255.255            在链路上       172.20.10.2    311
         192.168.56.0    255.255.255.0            在链路上      192.168.56.1    281
         192.168.56.1  255.255.255.255            在链路上      192.168.56.1    281
       192.168.56.255  255.255.255.255            在链路上      192.168.56.1    281
            224.0.0.0        240.0.0.0            在链路上         127.0.0.1    331
            224.0.0.0        240.0.0.0            在链路上   169.254.142.167    281
            224.0.0.0        240.0.0.0            在链路上      192.168.56.1    281
            224.0.0.0        240.0.0.0            在链路上     10.181.143.22    291
            224.0.0.0        240.0.0.0            在链路上       172.20.10.2    311
      255.255.255.255  255.255.255.255            在链路上         127.0.0.1    331
      255.255.255.255  255.255.255.255            在链路上   169.254.142.167    281
      255.255.255.255  255.255.255.255            在链路上      192.168.56.1    281
      255.255.255.255  255.255.255.255            在链路上     10.181.143.22    291
      255.255.255.255  255.255.255.255            在链路上       172.20.10.2    311
    ===========================================================================
    永久路由:
      网络地址          网络掩码  网关地址  跃点数
         10.181.143.0    255.255.255.0   10.181.143.254       1
           10.187.2.0    255.255.255.0   10.181.143.254       1
              0.0.0.0          0.0.0.0      172.20.10.1       1
    ===========================================================================
    ```

   至此，访问10.181.143.0~10.181.143.255、10.187.2.0~10.187.2.255这些IP都会走有线，其余所有IP走无线。

7. 大功告成！